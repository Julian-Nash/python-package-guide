# Python packaging quick-start

Here's a simple guide and example Python package. I wrote this mainly for myself but figured others may find it
 useful too.

### Structure:

The structure of this Python package look like this:

```sh
.
├── LICENSE.txt
├── README.md
├── .gitignore
├── helloworld
│   ├── __init__.py
│   └── hello_world.py
├── requirements.txt
├── setup.cfg
├── setup.py
└── tests
    ├── __init__.py
    └── test_hello_world.py
```

Where:

- `LICENSE.txt` - Contains the license I wish to apply to this code (Not required)
- `README.md` - This very file that you're reading now (Not required)
- `.gitignore` - A special file that tells git to ignore certain files (Not required)
- `helloworld` - The package source code
- `requirements.txt` - A list of dependencies, generated by the `pip freeze` command (Not required)
- `setup.cfg` - Supplemental configuration for the package (Not required)
- `setup.py` - The file containing the `setuptools` configuration


### Virtual environment

It's best practice when developing a Python project to use a local virtual environment at the root of your package.

Virtual environments can be created with the following command (Where `<NAME>` is replaced with the name of your
 environment, typically `env` or `venv`):

```shell script
python -m venv <NAME>
```

For example, the following command would create a virtual environment called `env`:

```shell script
python -m venv env
```

The environment needs to be activated before it is of any real use:

```shell script
source env/bin/activate
```

Any `python` commands will now invoke the interpreter from the virtual environment and any dependencies
 installed with `pip` will now be isolated to the virtual environment too.
 
The following command can now be used to generate a `requirements.txt` file:

```shell script
pip freeze > requirements.txt
```

### Local installation

Python packages with a `setup.py` file can be installed locally using pip:

```sh
pip install .
```

Providing the `-e` flag will install the package in development mode, meaning live changes can be made to your
 package (Ideal for when you're working on it)
 
 ```sh
pip install -e .
```

### Tests:

It's best practice to ship some unit tests with your package. Tests are located in the `tests` module and can be ran
 from the root of the package with the following command:
 
```sh
python -m unittest
```

The `unittest` test runner will find all of your tests and run them for you.


### Uploading to Pypi:

To upload your package to Pypi (So it can be installed by anyone with `pip install <your-package-name>`), you'll need
 to install `twine`
 
```shell script
pip install twine
```

Run the following command to create the distribution files:

```shell script
python setup.py sdist bdist_wheel
```

And finally, to upload your package:

```shell script
twine upload dist/*
```

Enter your Pypi credentials and watch as your glorious source code gets teleported up to the Pypi server.

### Updating your package

As time goes by, you'll likely need to make changes, fix bugs and add features to your package.

Making changes and running the same commands as above will result in an error when it comes to uploading your
 package
 to Pypi (The contents of the `/dist` directory cannot be duplicated once they've been uploaded!)
 
Follow these simple steps:

1. Delete any files in the `/dist` directory
2. Change the `version` in your `setup.py` file
3. Run the command `python setup.py sdist bdist_wheel`

You'll be prompted for your Pypi logins as before.

